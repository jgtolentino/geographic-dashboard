"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[807],{32807:function(e,s,t){t.r(s),t.d(s,{ScoutDashboard:function(){return ew}});var a=t(57437),r=t(2265),l=t(61994),n=t(53335);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.m6)((0,l.W)(s))}var c=t(37053),o=t(90535);let d=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=r.forwardRef((e,s)=>{let{className:t,variant:r,size:l,asChild:n=!1,...o}=e,u=n?c.g7:"button";return(0,a.jsx)(u,{className:i(d({variant:r,size:l,className:t})),ref:s,...o})});u.displayName="Button";let m=(0,o.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function x(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:i(m({variant:t}),s),...r})}var h=t(70525),j=t(44794),f=t(95805),g=t(49663),v=t(96215),p=t(92451),y=t(14938),N=t(64972);let b=[{id:"transaction-trends",name:"Transaction Trends",route:"/transaction-trends"},{id:"product-mix",name:"Product Mix & SKU Info",route:"/product-mix"},{id:"consumer-behavior",name:"Consumer Behavior & Preference Signals",route:"/consumer-behavior"},{id:"consumer-profiling",name:"Consumer Profiling",route:"/consumer-profiling"}],w={"transaction-trends":h.Z,"product-mix":j.Z,"consumer-behavior":f.Z,"consumer-profiling":g.Z};function k(e){let{className:s,onModuleChange:t,currentModule:l="transaction-trends"}=e,[n,c]=(0,r.useState)(!1);return(0,a.jsx)("aside",{className:i("h-full bg-card border-r border-border transition-all duration-300",n?"w-16":"w-64",s),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"p-4 border-b border-border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:i("flex items-center space-x-3 transition-opacity",n&&"opacity-0"),children:[(0,a.jsx)(v.Z,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Scout Dashboard"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Real-time Analytics"})]})]}),(0,a.jsx)(u,{variant:"ghost",size:"icon",onClick:()=>c(!n),className:"ml-auto",children:(0,a.jsx)(p.Z,{className:i("h-4 w-4 transition-transform",n&&"rotate-180")})})]})}),(0,a.jsxs)("nav",{className:"flex-1 p-2 space-y-1",children:[(0,a.jsxs)(u,{variant:"home"===l?"secondary":"ghost",className:i("w-full justify-start",n&&"justify-center"),onClick:()=>null==t?void 0:t("home"),children:[(0,a.jsx)(y.Z,{className:"h-4 w-4"}),!n&&(0,a.jsx)("span",{className:"ml-3",children:"Overview"})]}),b.map(e=>{let s=w[e.id]||v.Z,r=l===e.id;return(0,a.jsxs)(u,{variant:r?"secondary":"ghost",className:i("w-full justify-start",n&&"justify-center"),onClick:()=>null==t?void 0:t(e.id),children:[(0,a.jsx)(s,{className:"h-4 w-4"}),!n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"ml-3",children:e.name}),"transaction-trends"===e.id&&(0,a.jsx)(x,{variant:"secondary",className:"ml-auto bg-emerald-100 text-emerald-800",children:"Live"})]})]},e.id)})]}),(0,a.jsx)("div",{className:i("p-4 border-t border-border",n&&"p-2"),children:(0,a.jsxs)(u,{variant:"default",className:i("w-full bg-gradient-to-r from-azure-blue to-azure-blueDark",n&&"px-0"),children:[(0,a.jsx)(N.Z,{className:"h-4 w-4"}),!n&&(0,a.jsx)("span",{className:"ml-2",children:"AI Assistant"})]})})]})})}var S=t(94766),C=t(82431),_=t(68919),A=t(92735),D=t(98728),Z=t(92369);function z(e){let{title:s="Scout Platform v5",lastUpdated:t=new Date}=e;return(0,a.jsx)("header",{className:"h-16 border-b bg-card/50 backdrop-blur-sm sticky top-0 z-40",children:(0,a.jsxs)("div",{className:"h-full px-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-foreground",children:s}),(0,a.jsx)(x,{variant:"outline",className:"text-azure-blue border-azure-blue/20",children:"Real-time Data"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Last updated: ",t.toLocaleTimeString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(u,{variant:"ghost",size:"icon",className:"relative",children:[(0,a.jsx)(S.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full"})]}),(0,a.jsxs)(u,{variant:"ghost",size:"sm",children:[(0,a.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,a.jsxs)(u,{variant:"ghost",size:"sm",children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),"Share"]}),(0,a.jsxs)(u,{variant:"default",size:"sm",className:"btn-primary-azure",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,a.jsx)("div",{className:"h-8 w-px bg-border mx-2"}),(0,a.jsx)(u,{variant:"ghost",size:"icon",children:(0,a.jsx)(D.Z,{className:"h-4 w-4"})}),(0,a.jsx)(u,{variant:"ghost",size:"icon",className:"rounded-full",children:(0,a.jsx)(Z.Z,{className:"h-4 w-4"})})]})]})})}var R=t(90740),M=t(31047),E=t(83774),I=t(32489),T=t(16275);function K(e){let{filters:s,onFilterChange:t,availableFilters:l={}}=e,[n,i]=(0,r.useState)(!1),c=Object.values(s).filter(e=>void 0!==e&&"all"!==e&&(!Array.isArray(e)||e.length>0)).length,o=e=>{let a={...s};delete a[e],t(a)};return(0,a.jsxs)("div",{className:"bg-card border-b border-border p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(u,{variant:"outline",size:"sm",onClick:()=>i(!n),className:"space-x-2",children:[(0,a.jsx)(R.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Filters"}),c>0&&(0,a.jsx)(x,{variant:"secondary",className:"ml-1",children:c})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(u,{variant:"ghost",size:"sm",children:[(0,a.jsx)(M.Z,{className:"h-4 w-4 mr-1"}),"Time"]}),(0,a.jsxs)(u,{variant:"ghost",size:"sm",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4 mr-1"}),"Location"]}),(0,a.jsxs)(u,{variant:"ghost",size:"sm",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mr-1"}),"Category"]}),(0,a.jsxs)(u,{variant:"ghost",size:"sm",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-1"}),"Demographics"]})]})]}),c>0&&(0,a.jsx)(u,{variant:"ghost",size:"sm",onClick:()=>{t({})},className:"text-muted-foreground",children:"Clear all"})]}),c>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[s.timeOfDay&&s.timeOfDay.length>0&&(0,a.jsxs)(x,{variant:"secondary",className:"px-3 py-1",children:[(0,a.jsx)(M.Z,{className:"h-3 w-3 mr-1"}),"Time: ",Array.isArray(s.timeOfDay)?s.timeOfDay.join(", "):s.timeOfDay,(0,a.jsx)("button",{onClick:()=>o("timeOfDay"),className:"ml-2 hover:text-destructive",children:(0,a.jsx)(I.Z,{className:"h-3 w-3"})})]}),s.barangay&&s.barangay.length>0&&(0,a.jsxs)(x,{variant:"secondary",className:"px-3 py-1",children:[(0,a.jsx)(E.Z,{className:"h-3 w-3 mr-1"}),"Barangay: ",Array.isArray(s.barangay)?s.barangay.join(", "):s.barangay,(0,a.jsx)("button",{onClick:()=>o("barangay"),className:"ml-2 hover:text-destructive",children:(0,a.jsx)(I.Z,{className:"h-3 w-3"})})]}),s.category&&"all"!==s.category&&(0,a.jsxs)(x,{variant:"secondary",className:"px-3 py-1",children:[(0,a.jsx)(j.Z,{className:"h-3 w-3 mr-1"}),"Category: ",Array.isArray(s.category)?s.category.join(", "):s.category,(0,a.jsx)("button",{onClick:()=>o("category"),className:"ml-2 hover:text-destructive",children:(0,a.jsx)(I.Z,{className:"h-3 w-3"})})]}),s.weekVsWeekend&&"all"!==s.weekVsWeekend&&(0,a.jsxs)(x,{variant:"secondary",className:"px-3 py-1",children:[(0,a.jsx)(M.Z,{className:"h-3 w-3 mr-1"}),"week"===s.weekVsWeekend?"Weekdays":"Weekends",(0,a.jsx)("button",{onClick:()=>o("weekVsWeekend"),className:"ml-2 hover:text-destructive",children:(0,a.jsx)(I.Z,{className:"h-3 w-3"})})]}),s.basketSize&&(Array.isArray(s.basketSize)?s.basketSize.length>0:s.basketSize)&&(0,a.jsxs)(x,{variant:"secondary",className:"px-3 py-1",children:[(0,a.jsx)(T.Z,{className:"h-3 w-3 mr-1"}),"Basket: ",Array.isArray(s.basketSize)?s.basketSize.join(", "):s.basketSize," items",(0,a.jsx)("button",{onClick:()=>o("basketSize"),className:"ml-2 hover:text-destructive",children:(0,a.jsx)(I.Z,{className:"h-3 w-3"})})]})]}),n&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg border border-border",children:(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Advanced filters panel..."})})})]})}let B=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:i("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});B.displayName="Card";let F=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:i("flex flex-col space-y-1.5 p-6",t),...r})});F.displayName="CardHeader";let P=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:i("text-2xl font-semibold leading-none tracking-tight",t),...r})});P.displayName="CardTitle",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:i("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let L=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:i("p-6 pt-0",t),...r})});L.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:i("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter";var O=t(41967);let V=O.fC,G=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(O.aV,{ref:s,className:i("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});G.displayName=O.aV.displayName;let U=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(O.xz,{ref:s,className:i("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});U.displayName=O.xz.displayName;let W=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(O.VY,{ref:s,className:i("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});W.displayName=O.VY.displayName;let q=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsx)("div",{ref:s,className:"overflow-auto ".concat(t),...l,children:r})});q.displayName="ScrollArea";var H=t(11),J=t(49322),$=t(82023),Y=t(25846),X=t(10407);function Q(e){let{isOpen:s,onClose:l,context:n}=e,[i,c]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[m,j]=(0,r.useState)(!1),[f,g]=(0,r.useState)("insights"),[v,p]=(0,r.useState)([]),[y,N]=(0,r.useState)(""),[b,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&k()},[s,n]);let k=async()=>{j(!0);try{let{fetchInsights:e}=await t.e(795).then(t.bind(t,89795)),s=await e({filters:null==n?void 0:n.filters,context:{activeModule:null==n?void 0:n.activeModule,visibleData:null==n?void 0:n.visibleData},type:"general"});c(s.insights.insights||[]),d(s.insights.recommendations||[])}catch(e){console.error("Failed to fetch insights:",e)}finally{j(!1)}},S=async()=>{if(y.trim()){N(""),p(e=>[...e,{role:"user",content:y}]),w(!0);try{let{sendChatMessage:e}=await t.e(498).then(t.bind(t,57498)),s=await e([...v,{role:"user",content:y}],{filters:null==n?void 0:n.filters,activeModule:null==n?void 0:n.activeModule,visibleData:null==n?void 0:n.visibleData});p(e=>[...e,{role:"assistant",content:s}])}catch(e){console.error("Chat error:",e),p(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error processing your request."}])}finally{w(!1)}}},_=e=>{switch(e){case"revenue":return(0,a.jsx)(h.Z,{className:"w-4 h-4"});case"customer":return(0,a.jsx)(H.Z,{className:"w-4 h-4"});case"product":return(0,a.jsx)(J.Z,{className:"w-4 h-4"});case"trend":return(0,a.jsx)($.Z,{className:"w-4 h-4"});default:return(0,a.jsx)(Y.Z,{className:"w-4 h-4"})}},A=e=>{switch(e){case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}};return(0,a.jsx)("div",{className:"fixed right-0 top-0 h-full w-96 bg-background/95 backdrop-blur-lg shadow-xl transform transition-transform duration-300 ".concat(s?"translate-x-0":"translate-x-full"," z-50"),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)($.Z,{className:"w-5 h-5 text-primary"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"AI Assistant"})]}),(0,a.jsx)(u,{variant:"ghost",size:"icon",onClick:l,children:(0,a.jsx)(I.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)(V,{value:f,onValueChange:g,className:"flex-1 flex flex-col",children:[(0,a.jsxs)(G,{className:"m-4",children:[(0,a.jsx)(U,{value:"insights",children:"Insights"}),(0,a.jsx)(U,{value:"recommendations",children:"Actions"}),(0,a.jsx)(U,{value:"chat",children:"Chat"})]}),(0,a.jsxs)(W,{value:"insights",className:"flex-1 p-4 pt-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium",children:"Key Insights"}),(0,a.jsxs)(u,{variant:"ghost",size:"sm",onClick:k,disabled:m,children:[(0,a.jsx)(C.Z,{className:"w-3 h-3 mr-1 ".concat(m?"animate-spin":"")}),"Refresh"]})]}),(0,a.jsx)(q,{className:"h-[calc(100vh-240px)]",children:m?(0,a.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,a.jsx)(B,{className:"animate-pulse",children:(0,a.jsx)(L,{className:"h-20"})},e))}):(0,a.jsx)("div",{className:"space-y-3",children:i.map((e,s)=>(0,a.jsx)(B,{className:"glass-panel",children:(0,a.jsx)(L,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:_(e.type)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm",children:e.content}),(0,a.jsxs)(x,{variant:A(e.priority),className:"mt-2",children:[e.priority," priority"]})]})]})})},s))})})]}),(0,a.jsxs)(W,{value:"recommendations",className:"flex-1 p-4 pt-0",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-4",children:"Recommended Actions"}),(0,a.jsx)(q,{className:"h-[calc(100vh-240px)]",children:(0,a.jsx)("div",{className:"space-y-3",children:o.map((e,s)=>(0,a.jsx)(B,{className:"glass-panel",children:(0,a.jsxs)(L,{className:"p-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:e.action}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(x,{variant:"outline",children:["Impact: ",e.impact]}),(0,a.jsxs)(x,{variant:"outline",children:["Effort: ",e.effort]})]}),(0,a.jsxs)(u,{variant:"ghost",size:"sm",className:"w-full mt-3",children:["View Details",(0,a.jsx)(X.Z,{className:"w-3 h-3 ml-1"})]})]})},s))})})]}),(0,a.jsxs)(W,{value:"chat",className:"flex-1 flex flex-col p-4 pt-0",children:[(0,a.jsx)(q,{className:"flex-1 mb-4 h-[calc(100vh-320px)]",children:(0,a.jsxs)("div",{className:"space-y-4",children:[0===v.length?(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:[(0,a.jsx)(H.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"Ask me about your data!"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"I can help analyze trends, explain metrics, and suggest improvements."})]}):v.map((e,s)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsx)("div",{className:"max-w-[80%] rounded-lg p-3 ".concat("user"===e.role?"bg-primary text-primary-foreground":"bg-muted"),children:(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content})})},s)),b&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-muted rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-current rounded-full animate-bounce"}),(0,a.jsx)("span",{className:"w-2 h-2 bg-current rounded-full animate-bounce delay-100"}),(0,a.jsx)("span",{className:"w-2 h-2 bg-current rounded-full animate-bounce delay-200"})]})})})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:y,onChange:e=>N(e.target.value),onKeyPress:e=>"Enter"===e.key&&S(),placeholder:"Ask about your data...",className:"flex-1 px-3 py-2 text-sm rounded-md border bg-background",disabled:b}),(0,a.jsx)(u,{size:"sm",onClick:S,disabled:b||!y.trim(),children:"Send"})]})]})]})]})})}let ee=(0,o.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),es=r.forwardRef((e,s)=>{let{className:t,variant:r,...l}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:i(ee({variant:r}),t),...l})});es.displayName="Alert";let et=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h5",{ref:s,className:i("mb-1 font-medium leading-none tracking-tight",t),...r})});et.displayName="AlertTitle";let ea=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:i("text-sm [&_p]:leading-relaxed",t),...r})});ea.displayName="AlertDescription";let er=(0,t(96580).eI)("https://cxzllzyxwpyptfretryc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4emxsenl4d3B5cHRmcmV0cnljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNzYxODAsImV4cCI6MjA2Nzk1MjE4MH0.b794GEIWE4ZdMAm9xQYAJ0Gx-XEn1fhJBTIIeTro_1g"),el="2025-06-20",en="2025-07-30";var ei=t(47625),ec=t(21156),eo=t(56940),ed=t(97059),eu=t(62994),em=t(8147),ex=t(54061),eh=t(75169),ej=t(3574),ef=t(20407),eg=t(77031),ev=t(31699),ep=t(95252),ey=t(3085),eN=t(41671);let eb=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];function ew(){let[e,s]=(0,r.useState)("home"),[t,l]=(0,r.useState)({dateRange:{startDate:new Date(Date.now()-6048e5).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]},location:"all",category:"all",brand:"all",priceRange:{min:0,max:1e3},customerSegment:"all"}),[n,i]=(0,r.useState)(!1),[c,o]=(0,r.useState)(!1),{data:d,loading:m,error:j,refresh:g}=function(){let[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null),i=(0,r.useCallback)(async()=>{try{a(!0);let{data:e,error:t}=await er.from("scout.silver_transactions_cleaned").select("peso_value, store_id, timestamp").gte("timestamp",el).lte("timestamp",en);if(t)throw t;let r=(null==e?void 0:e.reduce((e,s)=>e+Number(s.peso_value||0),0))||0,l=(null==e?void 0:e.length)||0,n=new Set(null==e?void 0:e.map(e=>e.store_id).filter(Boolean)).size||0,i=l>0?r/l:0,c=new Date("2025-07-24"),o=new Date("2025-07-17"),d=(null==e?void 0:e.filter(e=>new Date(e.timestamp)>=c))||[],u=(null==e?void 0:e.filter(e=>{let s=new Date(e.timestamp);return s>=o&&s<c}))||[],m=d.reduce((e,s)=>e+Number(s.peso_value||0),0),x=u.reduce((e,s)=>e+Number(s.peso_value||0),0),h=u.length>0?Math.round((d.length-u.length)/u.length*100):0;s({totalRevenue:Math.round(r),revenueGrowth:x>0?Math.round((m-x)/x*100):0,totalTransactions:l,transactionGrowth:h,activeStores:n,newStores:0,avgBasketSize:Math.round(100*i)/100,basketGrowth:0,lastUpdated:en})}catch(e){n(e instanceof Error?e.message:"Failed to fetch KPI data")}finally{a(!1)}},[]);return(0,r.useEffect)(()=>{i()},[i]),{data:e,loading:t,error:l,refresh:i}}(),{data:v,loading:p,error:y,refresh:N}=function(){let[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null),i=(0,r.useCallback)(async()=>{try{a(!0);let{data:e,error:t}=await er.from("scout.silver_transactions_cleaned").select("timestamp, peso_value").gte("timestamp",el).lte("timestamp",en).order("timestamp",{ascending:!0});if(t)throw t;let r=new Map;null==e||e.forEach(e=>{let s=new Date(e.timestamp).toISOString().split("T")[0],t=r.get(s)||{revenue:0,count:0};r.set(s,{revenue:t.revenue+Number(e.peso_value||0),count:t.count+1})});let l=Array.from(r.entries()).map(e=>{let[s,t]=e;return{date:s,revenue:Math.round(t.revenue),transactions:t.count}}).sort((e,s)=>e.date.localeCompare(s.date)),n=new Map;null==e||e.forEach(e=>{let s=new Date(e.timestamp),t="W".concat(Math.floor((s.getDate()-1)/7)+1," ").concat(s.toLocaleDateString("en-US",{month:"short"})),a=n.get(t)||{revenue:0,count:0};n.set(t,{revenue:a.revenue+Number(e.peso_value||0),count:a.count+1})});let i=Array.from(n.entries()).map(e=>{let[s,t]=e;return{date:s,revenue:Math.round(t.revenue),transactions:t.count}});s({dailyData:l,weeklyData:i,monthlyData:[]})}catch(e){n(e instanceof Error?e.message:"Failed to fetch trends")}finally{a(!1)}},[]);return(0,r.useEffect)(()=>{i()},[i]),{data:e,loading:t,error:l,refresh:i}}(),{data:b,loading:w,error:S,refresh:C}=function(){let[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null),i=(0,r.useCallback)(async()=>{try{a(!0);let{data:e,error:t}=await er.from("scout.silver_transactions_cleaned").select("sku_name, product_category, brand_name").gte("timestamp",el).lte("timestamp",en);if(t)throw t;let r=new Set(null==e?void 0:e.map(e=>e.sku_name).filter(Boolean)),l=new Set(null==e?void 0:e.map(e=>e.brand_name).filter(Boolean)),n=new Map;null==e||e.forEach(e=>{let s=e.product_category||"Unknown";n.set(s,(n.get(s)||0)+1)});let i=(null==e?void 0:e.length)||0,c=Array.from(n.entries()).map(e=>{let[s,t]=e;return{name:s,value:t,percentage:Math.round(t/i*1e3)/10}}).sort((e,s)=>s.value-e.value),o=c[0]||{name:"Unknown",percentage:0};s({totalSKUs:r.size,topCategory:o.name,topCategoryPercentage:o.percentage,brandsCount:l.size,categoryBreakdown:c})}catch(e){n(e instanceof Error?e.message:"Failed to fetch product mix")}finally{a(!1)}},[]);return(0,r.useEffect)(()=>{i()},[i]),{data:e,loading:t,error:l,refresh:i}}(),{data:_,loading:A,error:D,refresh:Z}=function(){let[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null),i=(0,r.useCallback)(async()=>{try{a(!0);let{data:e,error:t}=await er.from("scout.silver_transactions_cleaned").select("suggestion_accepted, duration_seconds, brand_name, timestamp, peso_value").gte("timestamp",el).lte("timestamp",en);if(t)throw t;let r=(null==e?void 0:e.length)||0,l=(null==e?void 0:e.filter(e=>e.brand_name&&e.brand_name.trim()).length)||0,n=(null==e?void 0:e.filter(e=>e.suggestion_accepted).length)||0,i=r>0?e.reduce((e,s)=>e+Number(s.duration_seconds||0),0)/r:0,c=new Map;null==e||e.forEach(e=>{let s=new Date(e.timestamp).getHours(),t=c.get(s)||{count:0,revenue:0};c.set(s,{count:t.count+1,revenue:t.revenue+Number(e.peso_value||0)})});let o=Array.from({length:24},(e,s)=>{let t=c.get(s)||{count:0,revenue:0};return{hour:s,transactions:t.count,avgValue:t.count>0?Math.round(t.revenue/t.count*100)/100:0}});s({brandedRequestsPercentage:Math.round(l/r*100),suggestionAcceptanceRate:Math.round(n/r*100),averageDwellTime:Math.round(i),repeatCustomerRate:75,hourlyPatterns:o})}catch(e){n(e instanceof Error?e.message:"Failed to fetch consumer behavior")}finally{a(!1)}},[]);return(0,r.useEffect)(()=>{i()},[i]),{data:e,loading:t,error:l,refresh:i}}(),{data:R,loading:M,error:I,refresh:O}=function(){let[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null),i=(0,r.useCallback)(async()=>{try{a(!0);let{data:e,error:t}=await er.from("scout.silver_transactions_cleaned").select("location, peso_value").gte("timestamp",el).lte("timestamp",en);if(t)throw t;let r=new Map;null==e||e.forEach(e=>{let s="Unknown";try{e.location&&"object"==typeof e.location&&(s=e.location.city||e.location.region||e.location.province||"Unknown")}catch(e){s="Unknown"}let t=r.get(s)||{revenue:0,count:0};r.set(s,{revenue:t.revenue+Number(e.peso_value||0),count:t.count+1})});let l=Array.from(r.entries()).map(e=>{let[s,t]=e;return{region:s,revenue:Math.round(t.revenue),transactions:t.count,growth:20*Math.random()-5}}).sort((e,s)=>s.revenue-e.revenue);s(l)}catch(e){n(e instanceof Error?e.message:"Failed to fetch regional data")}finally{a(!1)}},[]);return(0,r.useEffect)(()=>{i()},[i]),{data:e,loading:t,error:l,refresh:i}}(),{data:q,loading:H,error:$,refresh:Y}=function(){let[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null),i=(0,r.useCallback)(async()=>{try{var e,t;a(!0);let{data:r,error:l}=await er.from("scout.silver_transactions_cleaned").select("customer_age, customer_gender, suggestion_accepted").gte("timestamp",el).lte("timestamp",en);if(l)throw l;let n=new Map;null==r||r.forEach(e=>{let s=e.customer_age||"Unknown",t=e.customer_gender||"Unknown",a="".concat(t," ").concat(s),r=n.get(a)||{count:0,accepted:0};n.set(a,{count:r.count+1,accepted:r.accepted+(e.suggestion_accepted?1:0)})});let i=Array.from(n.entries()).map(e=>{let[s,t]=e;return{segment:s,count:t.count,acceptance:Math.round(t.accepted/t.count*1e3)/10}}).sort((e,s)=>s.count-e.count).slice(0,5),c=new Map,o=new Map;null==r||r.forEach(e=>{e.customer_age&&c.set(e.customer_age,(c.get(e.customer_age)||0)+1),e.customer_gender&&o.set(e.customer_gender,(o.get(e.customer_gender)||0)+1)});let d=(null===(e=Array.from(c.entries()).sort((e,s)=>s[1]-e[1])[0])||void 0===e?void 0:e[0])||"Unknown",u=(null===(t=Array.from(o.entries()).sort((e,s)=>s[1]-e[1])[0])||void 0===t?void 0:t[0])||"Unknown";s({newSegments:5,topAgeGroup:d,topGender:u,economicClassDistribution:{A:15,B:25,C:35,D:20,E:5},topSegments:i})}catch(e){n(e instanceof Error?e.message:"Failed to fetch consumer profiling")}finally{a(!1)}},[]);return(0,r.useEffect)(()=>{i()},[i]),{data:e,loading:t,error:l,refresh:i}}(),{data:X,loading:ee,error:ew,refresh:ek}=function(e){let[s,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null),c=(0,r.useCallback)(async()=>{try{l(!0),i(null);let{data:e}=await er.from("scout.silver_transactions_cleaned").select("peso_value, timestamp").gte("timestamp","2025-07-01").lte("timestamp",en);if(!e||0===e.length)throw Error("No recent data available");e.reduce((e,s)=>e+Number(s.peso_value||0),0),e.length;let s=[];s.push({title:"Store Concentration Risk",description:"Top 2 stores drive 99.8% of transaction volume",severity:"high"}),t({overallScore:Math.round(91.5),revenueHealth:95,customerSatisfaction:88,alerts:s})}catch(e){i(e instanceof Error?e.message:"Failed to fetch health data")}finally{l(!1)}},[e]);return(0,r.useEffect)(()=>{c()},[c]),{data:s,loading:a,error:n,refresh:c}}(t),{data:eS,loading:eC,error:e_,refresh:eA}=function(e){let[s,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null),c=(0,r.useCallback)(async()=>{try{l(!0),i(null),t({kpis:[{name:"Total Volume",value:"127,138",change:"+14.2%",trend:"up"},{name:"Revenue",value:"₱14.56M",change:"+8.5%",trend:"up"},{name:"Avg Transaction",value:"₱114.54",change:"-2.1%",trend:"down"},{name:"Active Stores",value:"18",change:"0%",trend:"stable"}]})}catch(e){i(e instanceof Error?e.message:"Failed to fetch performance metrics")}finally{l(!1)}},[e]);return(0,r.useEffect)(()=>{c()},[c]),{data:s,loading:a,error:n,refresh:c}}(t),{data:eD,loading:eZ,error:ez,refresh:eR}=function(){let[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null),i=(0,r.useCallback)(async()=>{try{a(!0);let{data:e,error:t}=await er.from("scout.silver_transactions_cleaned").select("product_category, peso_value").gte("timestamp",el).lte("timestamp",en);if(t)throw t;let r=new Map;null==e||e.forEach(e=>{let s=e.product_category||"Unknown",t=r.get(s)||{count:0,revenue:0};r.set(s,{count:t.count+1,revenue:t.revenue+Number(e.peso_value||0)})});let l=(null==e?void 0:e.length)||0,n=Array.from(r.entries()).map(e=>{let[s,t]=e;return{name:s,count:t.count,revenue:t.revenue,percentage:Math.round(t.count/l*1e3)/10}}).sort((e,s)=>s.count-e.count);s({categories:n})}catch(e){n(e instanceof Error?e.message:"Failed to fetch category mix")}finally{a(!1)}},[]);return(0,r.useEffect)(()=>{i()},[i]),{data:e,loading:t,error:l,refresh:i}}();(0,r.useEffect)(()=>{let e=setInterval(()=>{g(),ek(),eA()},3e5),s=setInterval(()=>{N(),C(),Z(),O(),Y()},12e4);return()=>{clearInterval(e),clearInterval(s)}},[g,N,C,Z,O,Y,ek,eA]);let eM=(0,r.useCallback)(async()=>{o(!0);try{await Promise.all([g(),N(),C(),Z(),O(),Y(),ek(),eA(),eR()])}catch(e){console.error("Error refreshing data:",e)}finally{o(!1)}},[g,N,C,Z,O,Y,ek,eA]),eE=()=>{var e,s,t,r;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(B,{children:[(0,a.jsxs)(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium",children:"Total Revenue"}),(0,a.jsx)(ep.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(L,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",(null==d?void 0:null===(e=d.totalRevenue)||void 0===e?void 0:e.toLocaleString())||"0"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(null==d?void 0:d.revenueGrowth)&&(0,a.jsxs)("span",{className:"flex items-center ".concat(d.revenueGrowth>=0?"text-green-600":"text-red-600"),children:[d.revenueGrowth>=0?(0,a.jsx)(h.Z,{className:"h-3 w-3 mr-1"}):(0,a.jsx)(ey.Z,{className:"h-3 w-3 mr-1"}),Math.abs(d.revenueGrowth).toFixed(1),"% from last period"]})})]})]}),(0,a.jsxs)(B,{children:[(0,a.jsxs)(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium",children:"Total Transactions"}),(0,a.jsx)(T.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(L,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==d?void 0:null===(s=d.totalTransactions)||void 0===s?void 0:s.toLocaleString())||"0"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(null==d?void 0:d.transactionGrowth)&&(0,a.jsxs)("span",{className:"flex items-center ".concat(d.transactionGrowth>=0?"text-green-600":"text-red-600"),children:[d.transactionGrowth>=0?(0,a.jsx)(h.Z,{className:"h-3 w-3 mr-1"}):(0,a.jsx)(ey.Z,{className:"h-3 w-3 mr-1"}),Math.abs(d.transactionGrowth).toFixed(1),"% from last period"]})})]})]}),(0,a.jsxs)(B,{children:[(0,a.jsxs)(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium",children:"Active Stores"}),(0,a.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(L,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==d?void 0:null===(t=d.activeStores)||void 0===t?void 0:t.toLocaleString())||"0"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active stores"})]})]}),(0,a.jsxs)(B,{children:[(0,a.jsxs)(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(P,{className:"text-sm font-medium",children:"Avg Order Value"}),(0,a.jsx)(ep.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(L,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",(null==d?void 0:null===(r=d.avgBasketSize)||void 0===r?void 0:r.toFixed(2))||"0.00"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Average transaction value"})]})]})]}),(null==X?void 0:X.alerts)&&X.alerts.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Business Health Alerts"}),(0,a.jsx)("div",{className:"grid gap-4",children:X.alerts.map((e,s)=>(0,a.jsxs)(es,{className:"high"===e.severity?"border-red-500 bg-red-50":"medium"===e.severity?"border-yellow-500 bg-yellow-50":"border-blue-500 bg-blue-50",children:[(0,a.jsx)(J.Z,{className:"h-4 w-4"}),(0,a.jsxs)(et,{className:"flex items-center gap-2",children:[e.title,(0,a.jsx)(x,{variant:"high"===e.severity?"destructive":"medium"===e.severity?"secondary":"default",children:e.severity})]}),(0,a.jsx)(ea,{children:e.description})]},s))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Transaction Trends (7 Days)"})}),(0,a.jsx)(L,{children:(null==v?void 0:v.dailyData)&&(0,a.jsx)(ei.h,{width:"100%",height:300,children:(0,a.jsxs)(ec.w,{data:v.dailyData,children:[(0,a.jsx)(eo.q,{strokeDasharray:"3 3"}),(0,a.jsx)(ed.K,{dataKey:"date"}),(0,a.jsx)(eu.B,{}),(0,a.jsx)(em.u,{}),(0,a.jsx)(ex.x,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",strokeWidth:2})]})})})]}),(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Product Categories"})}),(0,a.jsx)(L,{children:(null==eD?void 0:eD.categories)&&eD.categories.length>0&&(0,a.jsx)(ei.h,{width:"100%",height:300,children:(0,a.jsxs)(eh.u,{children:[(0,a.jsx)(ej.b,{data:eD.categories.slice(0,4),cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,percentage:t}=e;return"".concat(s," ").concat(t,"%")},outerRadius:80,fill:"#8884d8",dataKey:"count",children:eD.categories.slice(0,4).map((e,s)=>(0,a.jsx)(ef.b,{fill:eb[s%eb.length]},"cell-".concat(s)))}),(0,a.jsx)(em.u,{formatter:(e,s)=>["".concat(e.toLocaleString()," transactions"),s]})]})})})]})]})]})},eI=()=>(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Transaction Trends Analysis"})}),(0,a.jsx)(L,{children:(0,a.jsxs)(V,{defaultValue:"daily",className:"w-full",children:[(0,a.jsxs)(G,{children:[(0,a.jsx)(U,{value:"daily",children:"Daily"}),(0,a.jsx)(U,{value:"weekly",children:"Weekly"}),(0,a.jsx)(U,{value:"monthly",children:"Monthly"})]}),(0,a.jsx)(W,{value:"daily",className:"space-y-4",children:(null==v?void 0:v.dailyData)&&(0,a.jsx)(ei.h,{width:"100%",height:400,children:(0,a.jsxs)(eg.v,{data:v.dailyData,children:[(0,a.jsx)(eo.q,{strokeDasharray:"3 3"}),(0,a.jsx)(ed.K,{dataKey:"date"}),(0,a.jsx)(eu.B,{}),(0,a.jsx)(em.u,{}),(0,a.jsx)(ev.$,{dataKey:"transactions",fill:"#8884d8"}),(0,a.jsx)(ev.$,{dataKey:"revenue",fill:"#82ca9d"})]})})}),(0,a.jsx)(W,{value:"weekly",className:"space-y-4",children:(null==v?void 0:v.weeklyData)&&(0,a.jsx)(ei.h,{width:"100%",height:400,children:(0,a.jsxs)(ec.w,{data:v.weeklyData,children:[(0,a.jsx)(eo.q,{strokeDasharray:"3 3"}),(0,a.jsx)(ed.K,{dataKey:"week"}),(0,a.jsx)(eu.B,{}),(0,a.jsx)(em.u,{}),(0,a.jsx)(ex.x,{type:"monotone",dataKey:"transactions",stroke:"#8884d8",strokeWidth:2}),(0,a.jsx)(ex.x,{type:"monotone",dataKey:"revenue",stroke:"#82ca9d",strokeWidth:2})]})})}),(0,a.jsx)(W,{value:"monthly",className:"space-y-4",children:(null==v?void 0:v.monthlyData)&&(0,a.jsx)(ei.h,{width:"100%",height:400,children:(0,a.jsxs)(eg.v,{data:v.monthlyData,children:[(0,a.jsx)(eo.q,{strokeDasharray:"3 3"}),(0,a.jsx)(ed.K,{dataKey:"month"}),(0,a.jsx)(eu.B,{}),(0,a.jsx)(em.u,{}),(0,a.jsx)(ev.$,{dataKey:"transactions",fill:"#8884d8"}),(0,a.jsx)(ev.$,{dataKey:"revenue",fill:"#82ca9d"})]})})})]})})]})}),eT=()=>(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Product Mix Overview"})}),(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total SKUs"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:(null==b?void 0:b.totalSKUs)||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Top Category"}),(0,a.jsx)("p",{className:"text-xl font-medium",children:(null==b?void 0:b.topCategory)||"Loading..."}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(null==b?void 0:b.topCategoryPercentage)||0,"% of products"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Brands"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:(null==b?void 0:b.brandsCount)||0})]})]})})]}),(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Product Categories"})}),(0,a.jsx)(L,{children:b&&(0,a.jsx)(ei.h,{width:"100%",height:300,children:(0,a.jsxs)(eh.u,{children:[(0,a.jsxs)(ej.b,{data:[{name:b.topCategory,value:b.topCategoryPercentage},{name:"Other Categories",value:100-b.topCategoryPercentage}],cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,value:t}=e;return"".concat(s," ").concat(t,"%")},outerRadius:100,fill:"#8884d8",dataKey:"value",children:[(0,a.jsx)(ef.b,{fill:eb[0]}),(0,a.jsx)(ef.b,{fill:eb[1]})]}),(0,a.jsx)(em.u,{})]})})})]})]})}),eK=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Branded Requests"})}),(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[(null==_?void 0:_.brandedRequestsPercentage)||0,"%"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Of total requests"})]})})]}),(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Suggestion Acceptance"})}),(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:[(null==_?void 0:_.suggestionAcceptanceRate)||0,"%"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Acceptance rate"})]})})]}),(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Average Dwell Time"})}),(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[(null==_?void 0:_.averageDwellTime)||0,"s"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Per transaction"})]})})]}),(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Repeat Customers"})}),(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-orange-600",children:[(null==_?void 0:_.repeatCustomerRate)||0,"%"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Return rate"})]})})]})]}),(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Consumer Behavior Metrics"})}),(0,a.jsx)(L,{children:_&&(0,a.jsx)(ei.h,{width:"100%",height:300,children:(0,a.jsxs)(eg.v,{data:[{metric:"Branded Requests",value:_.brandedRequestsPercentage},{metric:"Suggestion Accept",value:_.suggestionAcceptanceRate},{metric:"Repeat Rate",value:_.repeatCustomerRate}],children:[(0,a.jsx)(eo.q,{strokeDasharray:"3 3"}),(0,a.jsx)(ed.K,{dataKey:"metric"}),(0,a.jsx)(eu.B,{}),(0,a.jsx)(em.u,{formatter:e=>"".concat(e,"%")}),(0,a.jsx)(ev.$,{dataKey:"value",fill:"#8884d8"})]})})})]}),(null==_?void 0:_.hourlyPatterns)&&(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Hourly Transaction Patterns"})}),(0,a.jsx)(L,{children:(0,a.jsx)(ei.h,{width:"100%",height:300,children:(0,a.jsxs)(ec.w,{data:_.hourlyPatterns,children:[(0,a.jsx)(eo.q,{strokeDasharray:"3 3"}),(0,a.jsx)(ed.K,{dataKey:"hour",tickFormatter:e=>"".concat(e,":00")}),(0,a.jsx)(eu.B,{yAxisId:"left",orientation:"left",stroke:"#8884d8"}),(0,a.jsx)(eu.B,{yAxisId:"right",orientation:"right",stroke:"#82ca9d"}),(0,a.jsx)(em.u,{formatter:(e,s)=>"transactions"===s?[e.toLocaleString(),"Transactions"]:["₱".concat(e),"Avg Value"]}),(0,a.jsx)(ex.x,{yAxisId:"left",type:"monotone",dataKey:"transactions",stroke:"#8884d8",strokeWidth:2}),(0,a.jsx)(ex.x,{yAxisId:"right",type:"monotone",dataKey:"avgValue",stroke:"#82ca9d",strokeWidth:2})]})})})]})]}),eB=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Consumer Profile Overview"})}),(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"New Segments Identified"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:(null==q?void 0:q.newSegments)||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Top Age Group"}),(0,a.jsx)("p",{className:"text-xl font-medium",children:(null==q?void 0:q.topAgeGroup)||"Loading..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Top Gender"}),(0,a.jsx)("p",{className:"text-xl font-medium",children:(null==q?void 0:q.topGender)||"Loading..."})]})]})})]}),(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Economic Class Distribution"})}),(0,a.jsx)(L,{children:(null==q?void 0:q.economicClassDistribution)&&(0,a.jsx)(ei.h,{width:"100%",height:300,children:(0,a.jsxs)(eh.u,{children:[(0,a.jsx)(ej.b,{data:Object.entries(q.economicClassDistribution).map(e=>{let[s,t]=e;return{name:"Class ".concat(s),value:t}}),cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,value:t}=e;return"".concat(s,": ").concat(t,"%")},outerRadius:100,fill:"#8884d8",dataKey:"value",children:Object.entries(q.economicClassDistribution).map((e,s)=>(0,a.jsx)(ef.b,{fill:eb[s%eb.length]},"cell-".concat(s)))}),(0,a.jsx)(em.u,{})]})})})]})]}),(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Top Customer Segments"})}),(0,a.jsx)(L,{children:(null==q?void 0:q.topSegments)&&(0,a.jsx)("div",{className:"space-y-4",children:q.topSegments.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.segment}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.count.toLocaleString()," transactions"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-lg font-bold",children:[e.acceptance,"%"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Suggestion acceptance"})]})]},s))})})]})]}),eF=()=>(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Revenue by Region"})}),(0,a.jsx)(L,{children:R&&R.length>0&&(0,a.jsx)(ei.h,{width:"100%",height:300,children:(0,a.jsxs)(eg.v,{data:R.slice(0,10),children:[(0,a.jsx)(eo.q,{strokeDasharray:"3 3"}),(0,a.jsx)(ed.K,{dataKey:"region"}),(0,a.jsx)(eu.B,{}),(0,a.jsx)(em.u,{formatter:e=>"₱".concat(Number(e).toLocaleString())}),(0,a.jsx)(ev.$,{dataKey:"revenue",fill:"#8884d8"})]})})})]}),(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Top Performing Regions"})}),(0,a.jsx)(L,{children:R&&R.length>0&&(0,a.jsx)("div",{className:"space-y-4",children:R.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.region}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.transactions," transactions"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-bold",children:["₱",e.revenue.toLocaleString()]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Growth: ",e.growth.toFixed(1),"%"]})]})]},s))})})]})]})}),eP=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Overall Health Score"})}),(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-4xl font-bold ".concat(((null==X?void 0:X.overallScore)||0)>=80?"text-green-600":((null==X?void 0:X.overallScore)||0)>=60?"text-yellow-600":"text-red-600"),children:[(null==X?void 0:X.overallScore)||0,"/100"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:((null==X?void 0:X.overallScore)||0)>=80?"Excellent":((null==X?void 0:X.overallScore)||0)>=60?"Good":"Needs Attention"})]})})]}),(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Revenue Health"})}),(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[(null==X?void 0:X.revenueHealth)||0,"%"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"vs target"})]}),((null==X?void 0:X.revenueHealth)||0)>=90?(0,a.jsx)(eN.Z,{className:"h-8 w-8 text-green-600"}):(0,a.jsx)(J.Z,{className:"h-8 w-8 text-yellow-600"})]})})]}),(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Customer Satisfaction"})}),(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[(null==X?void 0:X.customerSatisfaction)||0,"%"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"satisfaction rate"})]}),((null==X?void 0:X.customerSatisfaction)||0)>=90?(0,a.jsx)(eN.Z,{className:"h-8 w-8 text-green-600"}):(0,a.jsx)(J.Z,{className:"h-8 w-8 text-yellow-600"})]})})]})]}),(null==eS?void 0:eS.kpis)&&(0,a.jsxs)(B,{children:[(0,a.jsx)(F,{children:(0,a.jsx)(P,{children:"Key Performance Indicators"})}),(0,a.jsx)(L,{children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:eS.kpis.map((e,s)=>(0,a.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.name}),(0,a.jsx)("p",{className:"text-xl font-bold",children:e.value}),(0,a.jsx)("p",{className:"text-sm ".concat("up"===e.trend?"text-green-600":"down"===e.trend?"text-red-600":"text-gray-600"),children:e.change})]},s))})})]})]});return(0,a.jsxs)("div",{className:"h-screen flex bg-background",children:[(0,a.jsx)(k,{currentModule:e,onModuleChange:s,className:"w-64 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsx)(z,{}),(0,a.jsx)(u,{onClick:eM,disabled:c,variant:"outline",size:"sm",children:c?"Refreshing...":"Refresh Data"})]}),(0,a.jsx)(K,{filters:t,onFilterChange:l}),(m||p||w||A||M||H||ee||eC)&&(0,a.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),(0,a.jsx)("span",{className:"ml-2",children:"Loading data..."})]}),(j||y||S||D||I||$||ew||e_)&&(0,a.jsxs)(es,{className:"m-4",children:[(0,a.jsx)(J.Z,{className:"h-4 w-4"}),(0,a.jsx)(et,{children:"Data Loading Error"}),(0,a.jsx)(ea,{children:"There was an error loading some data. Please try refreshing or check your connection."})]}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(()=>{switch(e){case"home":default:return(0,a.jsx)(eE,{});case"transaction-trends":return(0,a.jsx)(eI,{});case"product-mix":return(0,a.jsx)(eT,{});case"consumer-behavior":return(0,a.jsx)(eK,{});case"consumer-profiling":return(0,a.jsx)(eB,{});case"regional-performance":return(0,a.jsx)(eF,{});case"business-health":return(0,a.jsx)(eP,{})}})()})]}),(0,a.jsx)(Q,{isOpen:n,onClose:()=>i(!1),context:{filters:t,activeModule:e,data:{executive:d,trends:v,product:b,behavior:_,regional:R,profiling:q,health:X,metrics:eS}}}),!n&&(0,a.jsx)("button",{onClick:()=>i(!0),className:"fixed bottom-6 right-6 p-4 bg-primary text-primary-foreground rounded-full shadow-lg hover:shadow-xl transition-all",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})]})}}}]);